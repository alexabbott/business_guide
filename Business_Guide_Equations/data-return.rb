data = '2013 Traffic Volumes Book
Dist Route County Postmile Description
Back 
Peak 
Hour
Back 
Peak 
Month
Back 
AADT
Ahead 
Peak 
Hour
Ahead 
Peak 
AADT
Ahead 
AADT
12 1 ORA R 0.129 DANA POINT, JCT. RTE. 5 3800 40500 37500
12 1 ORA R 0.78 DANA POINT, DOHENY PARK ROAD 3800 40500 37500 3900 42000 38700
12 1 ORA 4.864 BREAK IN ROUTE
12 1 ORA 8.43 LAGUNA BEACH, MOUNTAIN ROAD 2900 39500 36800 2900 39500 36800
12 1 ORA 9.418 LAGUNA BEACH, JCT. RTE. 133 NORTH 3050 41000 38500 3450 41000 38500
12 1 ORA 9.6 LAGUNA BEACH, CLIFF DRIVE/ ASTER STREET 3400 40000 37400 3400 40000 37400
12 1 ORA 11.5 LAGUNA BEACH, NORTH CITY LIMITS 3200 38000 35500 3200 39000 35500
12 1 ORA 14.057 BREAK IN ROUTE
12 1 ORA R 18.073 NEWPORT BEACH, BAYSIDE DRIVE 4050 50000 45700 4850 60000 54600
12 1 ORA R 18.446 NEWPORT BEACH, DOVER DRIVE 4300 53000 48500 4300 53000 48500
12 1 ORA 19.797 NEWPORT BEACH, JCT. RTE. 55 4400 54000 49200 5400 52000 49200
12 1 ORA 20.37 NEWPORT BEACH, BALBOA BLVD/SUPERIOR AVE 5500 52000 49000 5500 52000 49000
12 1 ORA 21.549 SANTA ANA RIVER BRIDGE 4250 41000 38500 4250 41000 38500
12 1 ORA 22.09 HUNTINGTON BEACH, BROOKHURST STREET 4300 41500 39000 4350 41500 39000
12 1 ORA 23.739 HUNTINGTON BEACH, JCT. RTE. 39 4200 40500 38000 4200 40500 38000
12 1 ORA 25.89 HUNTINGTON BEACH, GOLDENWEST STREET 4100 39500 37000 4100 39500 37000
12 1 ORA 29.89 SUNSET BEACH, WARNER AVENUE 4950 47500 44300 4900 47000 44300
12 1 ORA 32.721 SEAL BEACH, SEAL BEACH BOULVARD 4450 49000 46000 4450 49500 46000
12 1 ORA 33.719 LOS ANGELES/ORANGE COUNTY LINE 4000 45500 41500
7 1 LA 0 LOS ANGELES/ORANGE COUNTY LINE 4000 46000 43000
7 1 LA 1.86 LONG BEACH, BELLFLOWER BOULEVARD 3400 38500 36000 2600 29000 27000
7 1 LA 1.973 LONG BEACH, JCT. RTE. 22, SEVENTH STREET 2600 29000 27000 3500 37500 35500
7 1 LA 2.751 LONG BEACH, ANAHEIM STREET 3500 37500 35500 2900 31500 29500
7 1 LA 5.011 LONG BEACH, CHERRY AVENUE 3700 38500 37500 3750 39500 38000
7 1 LA 6.26 LONG BEACH, LONG BEACH BOULEVARD 3300 34500 33500 3300 37000 35500
7 1 LA 7.288 LONG BEACH, JCT. RTE. 710 4600 49500 41700 4500 48500 40000
7 1 LA 8.266 LONG BEACH, JCT. RTE. 103 3900 41500 35000 3800 40000 34000
7 1 LA 9.253 LOS ANGELES, ALAMEDA STREET 3800 40000 34000 3750 43000 36800
7 1 LA 10.532 LOS ANGELES, AVALON BOULEVARD 3700 42000 36000 4600 50000 44000
7 1 LA 11.61 LOS ANGELES, JCT. RTE. 110 4600 51000 44500 4300 57000 55000
7 1 LA 12.171 LOS ANGELES, VERMONT AVENUE 4300 57000 55000 4200 55000 53000
Page 12013 Traffic Volumes Book
Dist Route County Postmile Description
Back 
Peak 
Hour
Back 
Peak 
Month
Back 
AADT
Ahead 
Peak 
Hour
Ahead 
Peak 
AADT
Ahead 
AADT
7 1 LA 12.523 LOS ANGELES, NORMANDIE AVENUE 4200 55000 53000 3950 51000 48500
7 1 LA 13.1 LOS ANGELES, JCT. RTE. 213 4000 51000 49000 5100 63000 61000
7 1 LA 14.634 TORRANCE, CRENSHAW BOULEVARD 4900 60000 58000 3850 45500 43500
7 1 LA 16.005 TORRANCE, JCT. RTE. 107 3350 40500 39000 3800 46500 42500
7 1 LA 18.09 TORRANCE, PALOS VERDES BOULEVARD 2850 35000 32000 2400 30500 27500
7 1 LA 19.524 REDONDO BEACH, TORRANCE BOULEVARD 3500 45000 41000 3500 45000 41500
7 1 LA 21.181 HERMOSA BEACH, AVIATION BOULEVARD 5500 71000 65000 4250 56000 52500
7 1 LA 21.341 HERMOSA BEACH, PIER AVENUE/14TH STREET 4250 56000 52500 3850 49500 47000
7 1 LA 21.919 MANHATTAN BEACH, ARTESIA BOULEVARD 4150 52000 49000 3900 51000 47500
7 1 LA 22.9 MANHATTAN BEACH, MANHATTAN BEACH BLVD 4200 53000 50000 4900 63000 59000
7 1 LA 23.924 EL SEGUNDO, ROSECRANS AVENUE 5700 71000 66000 5700 72000 67000
7 1 LA 24.911 EL SEGUNDO, EL SEGUNDO BOULEVARD 5200 64000 61000 4750 59000 56000
7 1 LA 25.924 LOS ANGELES, JCT. RTE. 105 5400 65000 62000 9600 116000 110000
7 1 LA 26.904 LOS ANGELES, LA INTL AIRPORT, CENTURY BLVD 9600 116000 110000 7100 85000 80500
7 1 LA 27.363 LOS ANGELES, LA INTL AIRPORT, VIA LINCOLN BLVD 7100 85000 80500 3250 41000 37000
7 1 LA 29.084 LOS ANGELES, MANCHESTER AVENUE 3750 46500 42000 5200 63000 56000
7 1 LA 30.163 LOS ANGELES, JEFFERSON BOULEVARD 5200 63000 56000 5100 64000 58000
7 1 LA 30.474 LOS ANGELES, CULVER BOULEVARD 5100 64000 58000 5300 66000 60000
7 1 LA 31.29 LOS ANGELES, JCT. RTE. 90 4500 58000 52000 5400 72000 65000
7 1 LA 31.78 LOS ANGELES, WASHINGTON BLVD 5500 75000 68000 4100 51000 47500
7 1 LA 32.166 LOS ANGELES, JCT. RTE. 187 4100 51000 47500 3450 45000 41500
7 1 LA R 34.576 SANTA MONICA, JCT. RTE. 10 3400 46500 43500 5700 66000 61500
7 1 LA 35.184 SANTA MONICA, OCEAN AVENUE 5700 66000 61500 6400 76000 71000
7 1 LA 36.11 SANTA MONICA, CALIFORNIA AVENUE INCLINE 6400 76000 71000 7500 87000 79000
7 1 LA 37.045 LOS ANGELES, CHAUTAUQUA BOULEVARD 7500 87000 79000 7600 89000 80000
7 1 LA 39.326 LOS ANGELES, SUNSET BOULEVARD 5900 71000 63000 5600 68000 60000
7 1 LA 40.769 JCT. RTE. 27, TOPANGA CANYON BOULEVARD 4850 60000 53000 4050 48000 43500
7 1 LA 44.121 MALIBU, LAS FLORES CANYON ROAD 3800 44500 40500 3850 45000 41000
7 1 LA 47.091 MALIBU, CROSS CREEK ROAD 3950 46500 41500 4650 48000 43000
7 1 LA 47.75 MALIBU, CIVIC CENTER WAY 4650 48000 43000 4000 41000 36500
7 1 LA 48.171 MALIBU, MALIBU CANYON ROAD 4000 41000 36500 3800 39000 34500
Page 22013'

#VARIABLES
checker = 4 				#Indicates which field to check for
page_checker = 0 			#Tracks the of point in the page variable being checked
line_number = 0 			#Indicates the current line number
end_of_page = 'Page' 		#Keyword to indicate when the end of a page is reached
new_page = true 			#Set to true when a new page is identified
found_traffic = true		#Indicates when traffic data has been found
skip_line = 0 				#Keeps track skipping lines at the beginning of each page
line_storage = ['']			#Stores each line in a buffer to find the last field
output = ['']				#Stores the output array

#NAMING VARIABLES
route = 0
county = 1
prefix = 2
postmile = 3
traffic = 4
new_line = 5
ready = 6

#PROGRAM
ascii_data = data.bytes			#Converts the data string into an array of bytes
ascii_data.length.times do |i|
	if new_page 
		if ascii_data[i] == 32
			skip_line+=1
			if skip_line == 18
				new_page = false
				skip_line = 0
			end
		end
	else
		end_of_page.length.times do |j|
			if ascii_data[i].chr == end_of_page[j] && page_checker == j
				page_checker = j+1
				if page_checker == 4
					page_checker = 0
					new_page = true
				end
			else
				new_page = false
			end
		end
		if checker == postmile && ascii_data[i] == 32
			output[line_number].push(ascii_data[i-1].chr+',')
			checker = ready
		elsif checker == postmile
			if ascii_data[i-1] != 32 
				output[line_number].push(ascii_data[i-1].chr)
			end
		elsif checker == prefix 
			if ascii_data[i] > 64 && ascii_data[i] < 123
				output[line_number].push(ascii_data[i].chr)
			else
				output[line_number].push(',')
				checker = postmile
			end
		elsif checker == county && ascii_data[i] == 32
			output[line_number].push(',')
			checker = prefix
		elsif checker == county
			output[line_number].push(ascii_data[i].chr)
		elsif checker == route && ascii_data[i] == 32
			output[line_number].push(',')
			checker = county
		elsif checker == route
			output[line_number].push(ascii_data[i].chr)
		end	
		if checker == new_line && ascii_data[i] == 32
			checker = route
		end
		line_storage.push(ascii_data[i])
		if ascii_data[i] == 10
			if line_number > 0
				output[line_number].push(',')
				j = line_storage.length-2
				k = 1
				while line_storage[j] != 32 && j > 0
					line_end = output[line_number].length
					output[line_number].insert(line_end-k,line_storage[j].chr)
					j-=1
					k+=1
				end
				output[line_number] = output[line_number].join()
			end	
			output.push([])
			checker = new_line
			line_storage = ['']
			line_number += 1
		end
	end	
end
output[line_number] = output[line_number].join()
output.length.times do |i|
	if output[i] == ""
		output-=[output[i]]
	end
	print output[i]
end

print output
print output.length